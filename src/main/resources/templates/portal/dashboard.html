<!--
=========================================================
* Soft UI Dashboard - v1.0.7
=========================================================

* Product Page: https://www.creative-tim.com/product/soft-ui-dashboard
* Copyright 2022 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" th:href="@{/portal/img/apple-icon.png}">
    <link rel="icon" type="image/png" th:href="@{/portal/img/favicon.png}">
    <title>Домашняя страница</title>
    <!--     Fonts and icons     -->
    <!--  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />-->
    <!-- Nucleo Icons -->
    <link th:href="@{/portal/css/nucleo-icons.css}" rel="stylesheet"/>
    <link th:href="@{/portal/css/nucleo-svg.css}" rel="stylesheet"/>
    <!-- Font Awesome Icons -->
    <!--  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>-->
    <!--  <link th:href="@{/css/nucleo-svg.css}" href="/resources/static/css/" rel="stylesheet" />-->
    <!-- CSS Files -->
    <link th:href="@{/portal/css/soft-ui-dashboard.css}" id="pagestyle" rel="stylesheet"/>
    <link th:href="@{/portal/js/plugins/DataTables/DataTables-1.13.4/css/jquery.dataTables.min.css}" rel="stylesheet"/>
</head>

<body id="test" class="g-sidenav-show  bg-gray-100">
<aside th:replace="~{/portal/fragments/sidebar-fragment.html::sidebar('/')}"></aside>

<main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <nav th:replace="~{/portal/fragments/header-fragment.html::header('Домашняя страница')}"></nav>
    <div class="container-fluid">
        <div class="page-header min-height-300 border-radius-xl"
             style="background-image: url('/portal/img/curved-images/123.jpg'); background-position-y: 50%;">
            <span class="mask bg-gradient-primary opacity-5"></span>
        </div>
        <div class="card card-body blur shadow-blur mx-4 mt-n6 overflow-hidden">
            <div class="row gx-4">
                <div class="col-auto">
                    <div class="avatar avatar-xl position-relative">
                        <img src="/portal/fonts/icons2/user-profile.svg" alt="profile_image"
                             class=" w-100 h-100 border-radius-lg shadow-sm">
                    </div>
                </div>
                <div class="col-auto my-auto">
                    <div class="h-100">
                        <h5 class="mb-1"
                            th:text="${User.getSurname() + ' ' + User.getName() + ' ' + User.getMiddleName()}">
                            Фамилия Имя Отчество
                        </h5>
                        <p class="mb-0 font-weight-bold text-sm">
                            <span th:text="${User.getDepartments().getName()}">Отдел</span>
                            / <span th:text="${User.getPosition().getName()}">Должность</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div id="h-auto" class="row">
            <div class="col-12 mt-4">
                <div class="card h-100">
                    <div class="card-header pt-3 pb-0 pe-2">
                        <h5 class="text-muted">Личные данные</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12 col-md-4">
                                <ul class="list-group">
                                    <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">Адрес:</strong> &nbsp;
                                        <span th:if="${User.getAddress().getFrame() != null}"
                                              th:text="${User.getAddress().getCity() + ' ' + User.getAddress().getStreet() + ' ' + User.getAddress().getHouse() + ' ' + User.getAddress().getFrame()}">ул.Чкалова 160Б (ГО СФР по Забайкальскому краю)</span>
                                        <span th:if="${User.getAddress().getFrame() == null}"
                                              th:text="${User.getAddress().getCity() + ' ' + User.getAddress().getStreet() + ' ' + User.getAddress().getHouse()}">ул.Чкалова 160Б (ГО СФР по Забайкальскому краю)</span>
                                    </li>
                                    <li th:if="${User.getPhone() != null}" class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">Городской номер:</strong> &nbsp;
                                        <nobr th:text="${User.getPhone()}">+7 (7898) 34 - 45 - 45
                                        </nobr>
                                    </li>
                                    <li th:if="${User.getMobilePhone() != null}" class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">Сотовый:</strong> &nbsp;
                                        <nobr th:text="${User.getMobilePhone()}">+7 (914) 999-99-99
                                        </nobr>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-12 col-md-4">
                                <ul class="list-group">
                                    <li th:if="${User.getIpPhone() != null}" class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">IP телефон:</strong> &nbsp;
                                        <nobr th:text="${User.getIpPhone()}">1613</nobr>
                                    </li>
                                    <li th:if="${User.getIpAddressPC() != null}" class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">IP адрес компьютера:</strong> &nbsp;
                                        <nobr th:text="${User.getIpAddressPC()}">10.85.5.4</nobr>
                                    </li>
                                    <li th:if="${User.getWorkEmail() != null}" class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">Рабочая почта:</strong> &nbsp;
                                        <nobr th:text="${User.getWorkEmail()}">User@arm.gs.gov</nobr>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-12 col-md-4">
                                <ul class="list-group">

                                    <li th:if="${User.getHomeEmail() != null}" class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">Домашняя почта:</strong> &nbsp;
                                        <nobr th:text="${User.getHomeEmail()}">user@mail.com</nobr>
                                    </li>
                                    <li th:if="${User.getCabinetNumber() != null}" class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">Номер кабинета:</strong> &nbsp;
                                        <nobr th:text="${User.getCabinetNumber()}">5</nobr>
                                    </li>
                                    <li th:if="${User.getIpAddressPC() != null}" class="list-group-item border-0 ps-0 pt-0 text-sm"><strong
                                            class="text-dark">IP адрес компьютера:</strong> &nbsp;
                                        <nobr th:text="${User.getIpAddressPC()}">10.85.5.4</nobr>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 mt-4">
                <div id="card-users" class="card h-100">
                    <div class="card-header pt-3 pb-0 pe-2">
                        <h5 class="text-muted">C вами в отделе</h5>
                    </div>
                    <div class="card-body overflow-auto">
                        <div class="table-responsive">
                            <table id="usersTable" class="w-100 table table-striped align-items-center m-0" data-sticky-header="true" data-sticky-header-offset-y="60">
                                <thead>
                                <tr>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Ф.И.О
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Должность
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid py-4">
            <footer class="footer pt-3  ">
                <div class="container-fluid">
                    <div class="row align-items-center justify-content-lg-between">
                        <div class="col-lg-6 mb-lg-0 mb-4">
                            <div class="copyright text-center text-sm text-muted text-lg-start">
                                © Alex Orl
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</main>
<!--   Core JS Files   -->
<script src="/portal/js/core/popper.min.js"></script>
<script src="/portal/js/core/bootstrap.min.js"></script>
<script src="/portal/js/plugins/perfect-scrollbar.min.js"></script>
<script src="/portal/js/plugins/smooth-scrollbar.min.js"></script>
<script src="/portal/js/plugins/chartjs.min.js"></script>
<script src="/portal/js/plugins/jquery.js"></script>
<!--<script src="/portal/js/plugins/DataTables/datatables.min.js"></script>-->
<script src="/portal/js/plugins/DataTables/DataTables-1.13.4/js/jquery.dataTables.min.js"></script>
<script>
    let win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
        let options = {
            damping: '0.5'
        }
        Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
    // function locationDocument(e) {
    //     document.location = e.getAttribute('href');
    // }

    $(document).ready(function () {
        $('#usersTable').DataTable({
            "pageLength": 4,
            "lengthChange": false,

            language: {
                url: '/portal/ru.json'
            },
            'ajax': {
                'contentType': 'application/json',
                'url': '/api/v1/users/get/all/department',
                'type': 'POST',
                'dataSrc': function (json) {
                    let data = json.map(function (d) {
                        d.name = d.name + " " + d.surname + " " + d.middleName;
                        return d;
                    })
                    return data;
                }
            },
            columns : [{
                data : 'name'
            },  {
                data : 'position.name'
            }],
            "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                $(nRow).css( 'cursor', 'pointer' );
                $(nRow).click(function(){
                    window.location = '/users/get/' + aData.id;
                    return false;
                });
                $(nRow).on("mousedown", function(e) {
                    if (e.which === 2) {
                        window.open('/users/get/' + aData.id) ;
                        return false;
                    }
                });
            }
        });
    });

</script>
<script src="/portal/js/soft-ui-dashboard.js"></script>
</body>

</html>